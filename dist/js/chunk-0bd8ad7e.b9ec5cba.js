(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bd8ad7e"],{1146:function(t,e,i){},"1a04":function(t,e,i){},"39ee":function(t,e,i){"use strict";var n=i("a5da"),a=i.n(n);a.a},"48f4":function(t,e,i){"use strict";function n(t){return"NavigationDuplicated"===t.name||t.message&&-1!==t.message.indexOf("redundant navigation")}function a(t,e){var i=e.to,a=e.url,r=e.replace;if(i&&t){var s=t[r?"replace":"push"](i);s&&s.catch&&s.catch((function(t){if(t&&!n(t))throw t}))}else a&&(r?location.replace(a):location.href=a)}function r(t){a(t.parent&&t.parent.$router,t.props)}i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return s}));var s={url:String,replace:Boolean,to:[String,Object]}},"498a":function(t,e,i){"use strict";var n=i("23e7"),a=i("58a8").trim,r=i("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},"794b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",attrs:{id:"search"}},[n("div",{staticClass:"searchnav"},[n("span",{staticClass:"searchback",on:{click:t.searchback}},[n("img",{staticStyle:{width:"40px"},attrs:{src:i("ec89"),alt:""}})]),n("div",{staticClass:"searchbox"},[n("van-search",{attrs:{placeholder:t.placeHolder,autofocus:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchHandler(e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)]),n("Scroll",{ref:"scroll",staticClass:"content",attrs:{probeType:3}},[t.isShow?n("SearchHot",{attrs:{tagList:t.tagList},on:{tagSearch:t.tagSearch}}):t._e(),t._l(t.searchResList,(function(e){return n("ul",{key:e.id,staticClass:"searchlist"},[n("li",{staticClass:"searchListItem",on:{click:function(i){return t.ListItemClick(e)}}},[n("div",{staticClass:"searchinfo"},[n("div",{staticClass:"songtitle"},[t._v(t._s(e.name))]),n("div",{staticClass:"songdetail"},[t._v(t._s(e.artists[0].name)+" - "+t._s(e.album.name))])]),n("span",{staticClass:"more"},[n("a",{staticClass:"paly-icon",attrs:{href:"#"}},[n("van-icon",{staticClass:"play-icon",attrs:{name:"play-circle-o"}})],1)])])])}))],2)],1)},a=[],r=(i("b0c0"),i("498a"),i("96cf"),i("1da1")),s=i("ade3"),o=(i("c3a6"),i("ad06")),c=(i("68ef"),i("9d70"),i("3743"),i("1a04"),i("1146"),i("f032"),i("2638")),l=i.n(c),u=i("c31d"),h=i("d282"),d=i("ba31"),f=i("1325"),g=i("a142");function v(){return!g["f"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var b=i("a8c1"),p=v();function m(){p&&Object(b["g"])(Object(b["b"])())}function k(t,e,i){var n=t.indexOf(e);return-1===n?t:"-"===e&&0!==n?t.slice(0,n):t.slice(0,n+1)+t.slice(n).replace(i,"")}function y(t,e){t=e?k(t,".",/\./g):t.split(".")[0],t=k(t,"-",/-/g);var i=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(i,"")}var S=i("ea8e"),j=i("48f4"),w={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,clickable:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0}},O=Object(h["a"])("cell"),x=O[0],C=O[1];function $(t,e,i,n){var a=e.icon,r=e.size,s=e.title,c=e.label,u=e.value,h=e.isLink,f=i.title||Object(g["b"])(s);function v(){var n=i.label||Object(g["b"])(c);if(n)return t("div",{class:[C("label"),e.labelClass]},[i.label?i.label():c])}function b(){if(f)return t("div",{class:[C("title"),e.titleClass],style:e.titleStyle},[i.title?i.title():t("span",[s]),v()])}function p(){var n=i.default||Object(g["b"])(u);if(n)return t("div",{class:[C("value",{alone:!f}),e.valueClass]},[i.default?i.default():t("span",[u])])}function m(){return i.icon?i.icon():a?t(o["a"],{class:C("left-icon"),attrs:{name:a,classPrefix:e.iconPrefix}}):void 0}function k(){var n=i["right-icon"];if(n)return n();if(h){var a=e.arrowDirection;return t(o["a"],{class:C("right-icon"),attrs:{name:a?"arrow-"+a:"arrow"}})}}function y(t){Object(d["a"])(n,"click",t),Object(j["a"])(n)}var S=h||e.clickable,w={clickable:S,center:e.center,required:e.required,borderless:!e.border};return r&&(w[r]=r),t("div",l()([{class:C(w),attrs:{role:S?"button":null,tabindex:S?0:null},on:{click:y}},Object(d["b"])(n)]),[m(),b(),p(),k(),null==i.extra?void 0:i.extra()])}$.props=Object(u["a"])(Object(u["a"])({},w),j["c"]);var I=x($),L=Object(h["a"])("field"),F=L[0],R=L[1],B=F({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(u["a"])(Object(u["a"])({},w),{},{name:String,rules:Array,disabled:Boolean,readonly:Boolean,autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[String,Number],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){return this.clearable&&this.focused&&""!==this.value&&Object(g["b"])(this.value)&&!this.readonly},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return Object(u["a"])(Object(u["a"])({},this.$listeners),{},{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(S["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var n=e.validator(t,e);if(Object(g["e"])(n))return n.then(i);i(n)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return Object(g["c"])(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i)?i.validator?e.runValidator(t,i).then((function(n){!1===n&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,i))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,i)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.runRules(t).then((function(){e.validateFailed?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));this.validate(i)}},resetValidation:function(){this.validateMessage&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=Object(g["b"])(t)?String(t):"";var i=this.maxlength;if(Object(g["b"])(i)&&t.length>i&&(t=t.slice(0,i)),"number"===this.type||"digit"===this.type){var n="number"===this.type;t=y(t,n)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var a=this.$refs.input;a&&t!==a.value&&(a.value=t),t!==this.value&&this.$emit("input",t),this.currentValue=t},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),m()},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(f["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||Object(f["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(g["d"])(this.autosize)){var i=this.autosize,n=i.maxHeight,a=i.minHeight;n&&(e=Math.min(e,n)),a&&(e=Math.max(e,a))}e&&(t.style.height=e+"px")}},genInput:function(){var t=this.$createElement,e=this.type,i=this.slots("input"),n=this.getProp("inputAlign");if(i)return t("div",{class:R("control",[n,"custom"]),on:{click:this.onClickInput}},[i]);var a={ref:"input",class:R("control",n),domProps:{value:this.value},attrs:Object(u["a"])(Object(u["a"])({},this.$attrs),{},{name:this.name,disabled:this.disabled,readonly:this.readonly,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",l()([{},a]));var r,s=e;return"number"===e&&(s="text",r="decimal"),"digit"===e&&(s="tel",r="numeric"),t("input",l()([{attrs:{type:s,inputmode:r}},a]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:R("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(o["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:R("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(o["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:R("word-limit")},[t("span",{class:R("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:R("error-message",i)},[e])}}},getProp:function(t){return Object(g["b"])(this[t])?this[t]:this.vanForm&&Object(g["b"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,n=this.getProp("labelAlign"),a={icon:this.genLeftIcon},r=this.genLabel();r&&(a.title=function(){return r});var s=this.slots("extra");return s&&(a.extra=function(){return s}),e(I,{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:R("value"),titleClass:[R("label",n),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:a,class:R((t={error:this.showError,disabled:this.disabled},t["label-"+n]=n,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:R("body")},[this.genInput(),this.showClear&&e(o["a"],{attrs:{name:"clear"},class:R("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:R("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}}),P=Object(h["a"])("search"),M=P[0],_=P[1],E=P[2];function z(t,e,i,n){function a(){if(i.label||e.label)return t("div",{class:_("label")},[i.label?i.label():e.label])}function r(){if(e.showAction)return t("div",{class:_("action"),attrs:{role:"button",tabindex:"0"},on:{click:a}},[i.action?i.action():e.actionText||E("cancel")]);function a(){i.action||(Object(d["a"])(n,"input",""),Object(d["a"])(n,"cancel"))}}var s={attrs:n.data.attrs,on:Object(u["a"])(Object(u["a"])({},n.listeners),{},{keypress:function(t){13===t.keyCode&&(Object(f["c"])(t),Object(d["a"])(n,"search",e.value)),Object(d["a"])(n,"keypress",t)}})},o=Object(d["b"])(n);return o.attrs=void 0,t("div",l()([{class:_({"show-action":e.showAction}),style:{background:e.background}},o]),[null==i.left?void 0:i.left(),t("div",{class:_("content",e.shape)},[a(),t(B,l()([{attrs:{type:"search",border:!1,value:e.value,leftIcon:e.leftIcon,rightIcon:e.rightIcon,clearable:e.clearable},scopedSlots:{"left-icon":i["left-icon"],"right-icon":i["right-icon"]}},s]))]),r()])}z.props={value:String,label:String,rightIcon:String,actionText:String,showAction:Boolean,background:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var A=M(z),H=i("1bab"),T=function(){return H["a"].get("/search/hot")},V=function(){return H["a"].get("/search/default")},W=function(t){return H["a"].get("/search?keywords=".concat(t))},D=function(t){return H["a"].get("/search/suggest?keywords=".concat(t,"&type=mobile"))},q=i("8137"),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"searchhot"},t._l(t.tagList,(function(e){return i("span",{key:e.first,staticClass:"hotitem"},[i("van-tag",{staticClass:"tag",attrs:{plain:"",round:"",size:"large"},on:{click:function(i){return t.tagClick(e)}}},[t._v(t._s(e.first))])],1)})),0)])},J=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("热门搜索")])])}],K=(i("9b7e"),i("b1d2")),U=Object(h["a"])("tag"),G=U[0],Q=U[1];function X(t,e,i,n){var a,r,s=e.type,c=e.mark,u=e.plain,h=e.color,f=e.round,g=e.size,v=u?"color":"backgroundColor",b=(a={},a[v]=h,a);e.textColor&&(b.color=e.textColor);var p={mark:c,plain:u,round:f};g&&(p[g]=g);var m=e.closeable&&t(o["a"],{attrs:{name:"cross"},class:Q("close"),on:{click:function(t){t.stopPropagation(),Object(d["a"])(n,"close")}}});return t("transition",{attrs:{name:e.closeable?"van-fade":null}},[t("span",l()([{key:"content",style:b,class:[Q([p,s]),(r={},r[K["b"]]=u,r)]},Object(d["b"])(n,!0)]),[null==i.default?void 0:i.default(),m])])}X.props={size:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean,type:{type:String,default:"default"}};var Y,Z=G(X),tt={name:"SearchHot",components:Object(s["a"])({},Z.name,Z),props:["tagList"],methods:{tagClick:function(t){this.$emit("tagSearch",t.first)}}},et=tt,it=(i("be69"),i("2877")),nt=Object(it["a"])(et,N,J,!1,null,"282e771d",null),at=nt.exports,rt=i("6701"),st={name:"Search",components:(Y={},Object(s["a"])(Y,A.name,A),Object(s["a"])(Y,"Icon",o["a"]),Object(s["a"])(Y,"SearchHot",at),Object(s["a"])(Y,"Scroll",rt["a"]),Y),data:function(){return{isShow:!0,value:"",searchResList:[],tagList:[],placeHolder:""}},created:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.searchDefault(),t.initSearchHot();case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.scroll.scroll.refresh()}))},methods:{searchback:function(){this.$router.back()},searchSuggest:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D(t.value.trim());case 2:i=e.sent,n=i.data,console.log(n);case 5:case"end":return e.stop()}}),e)})))()},searchDefault:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:i=e.sent,n=i.data,t.placeHolder=n.data.realkeyword;case 5:case"end":return e.stop()}}),e)})))()},searchHandler:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.value){e.next=9;break}return e.next=3,W(t.value.trim()).catch((function(t){return t}));case 3:i=e.sent,n=i.data.result,t.searchResList=n.songs,t.isShow=!1,e.next=15;break;case 9:return e.next=11,W(t.placeHolder.trim()).catch((function(t){return t}));case 11:a=e.sent,r=a.data.result,t.searchResList=r.songs,t.isShow=!1;case 15:case"end":return e.stop()}}),e)})))()},ListItemClick:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var n,a,r,s,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.$store.commit("play"),i.next=3,Object(q["d"])(t.id);case 3:return n=i.sent,a=n.data.songs,i.next=7,Object(q["f"])(t.id);case 7:r=i.sent,s=r.data,console.log(s),o={},o.url=s.data[0].url,o.id=t.id,o.singer=t.artists[0].name,o.albumPic=a[0].al.picUrl,o.name=t.name,e.$store.commit("addToCurrentPlay",o),e.$store.dispatch("AddToPlayList",o);case 18:case"end":return i.stop()}}),i)})))()},initSearchHot:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:i=e.sent,n=i.data,t.tagList=n.result.hots;case 5:case"end":return e.stop()}}),e)})))()},tagSearch:function(t){this.value=t,this.searchHandler(this.value)}},watch:{value:function(t,e){""===t?this.isShow=!1:this.searchSuggest()}}},ot=st,ct=(i("39ee"),Object(it["a"])(ot,n,a,!1,null,"7acc1950",null));e["default"]=ct.exports},"9b7e":function(t,e,i){},a5da:function(t,e,i){},be69:function(t,e,i){"use strict";var n=i("c901"),a=i.n(n);a.a},c8d2:function(t,e,i){var n=i("d039"),a=i("5899"),r="​᠎";t.exports=function(t){return n((function(){return!!a[t]()||r[t]()!=r||a[t].name!==t}))}},c901:function(t,e,i){},f032:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0bd8ad7e.b9ec5cba.js.map